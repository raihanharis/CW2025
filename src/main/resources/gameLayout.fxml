<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.Group?>
<?import com.comp2042.GameOverPanel?>
<?import java.net.URL?>
<?import javafx.scene.control.*?>
<?import javafx.scene.text.Text?>

<!-- Root: StackPane for overlays -->
<StackPane fx:id="rootPane"
           fx:controller="com.comp2042.GuiController"
           xmlns:fx="http://javafx.com/fxml"
           style="-fx-background-color: linear-gradient(to bottom, #0a0a1a, #000000);">

    <!-- Main game layout -->
    <HBox fx:id="gameContainer" alignment="CENTER" spacing="20" style="-fx-background-color: linear-gradient(to bottom, #0a0a1a, #000000);">
        
        <!-- LEFT SIDEBAR - Control Panel (Official Tetris Style) -->
        <VBox fx:id="leftPanel" 
              alignment="TOP_CENTER" 
              spacing="14"
              style="-fx-background-color: linear-gradient(to bottom, #1a1a2e, #0d0d1a); -fx-padding: 20 15; -fx-background-radius: 10; -fx-min-width: 130; -fx-pref-width: 130; -fx-max-width: 130;">
            
            <!-- Title -->
            <Label text="TETRIS" style="-fx-text-fill: #00d4ff; -fx-font-size: 24; -fx-font-weight: bold; -fx-effect: dropshadow(gaussian, #00d4ff, 10, 0.5, 0, 0);"/>
            
            <!-- Separator -->
            <Separator style="-fx-padding: 5 0;"/>
            
            <!-- SCORE Section -->
            <VBox alignment="CENTER" spacing="6" styleClass="stat-panel score-panel">
                <Label text="SCORE" styleClass="stat-title"/>
                <Label fx:id="scoreLabel" text="0" styleClass="scoreValue"/>
            </VBox>
            
            <!-- LEVEL Section -->
            <VBox alignment="CENTER" spacing="6" styleClass="stat-panel level-panel">
                <Label text="LEVEL" styleClass="stat-title"/>
                <Label fx:id="levelLabel" text="1" styleClass="levelValue"/>
            </VBox>
            
            <!-- LINES Section -->
            <VBox alignment="CENTER" spacing="6" styleClass="stat-panel lines-panel">
                <Label text="LINES" styleClass="stat-title"/>
                <Label fx:id="linesLabel" text="0" styleClass="linesValue"/>
            </VBox>
            
            <!-- Spacer -->
            <Region VBox.vgrow="ALWAYS"/>
            
            <!-- Buttons Section -->
            <VBox alignment="CENTER" spacing="20">
                <Button fx:id="restartButton" 
                        text="⟳ RESTART"
                        onAction="#onRestartClick"
                        prefWidth="120"
                        styleClass="game-button restart-button"/>
                
                <Button fx:id="pauseButton"
                        text="⏸ PAUSE"
                        onAction="#onPauseClick"
                        prefWidth="120"
                        styleClass="game-button pause-resume-button"/>
            </VBox>
            
            <!-- Controls Help -->
            <VBox alignment="CENTER" spacing="3" style="-fx-padding: 15 0 0 0;">
                <Label text="─── CONTROLS ───" style="-fx-text-fill: #555555; -fx-font-size: 9;"/>
                <Label text="← →  Move" style="-fx-text-fill: #666666; -fx-font-size: 10;"/>
                <Label text="↑    Rotate" style="-fx-text-fill: #666666; -fx-font-size: 10;"/>
                <Label text="↓    Soft Drop" style="-fx-text-fill: #666666; -fx-font-size: 10;"/>
                <Label text="SPACE Hard Drop" style="-fx-text-fill: #666666; -fx-font-size: 10;"/>
                <Label text="P    Pause" style="-fx-text-fill: #666666; -fx-font-size: 10;"/>
            </VBox>
        </VBox>
        
        <!-- CENTER: Game Board Container -->
        <VBox alignment="CENTER" styleClass="playfield-container">
            <GridPane fx:id="gamePanel" 
                      hgap="1" 
                      vgap="1"
                      styleClass="playfield-grid"/>
        </VBox>

        <!-- RIGHT: Next Preview Panel -->
        <VBox fx:id="nextPanel" 
              alignment="TOP_CENTER" 
              spacing="12"
              style="-fx-padding: 30 0; -fx-min-width: 100; -fx-pref-width: 100; -fx-max-width: 100;">
            
            <!-- NEXT 1 Label - Above the first frame (center-aligned) -->
            <Label fx:id="nextLabel" 
                   text="NEXT 1" 
                   styleClass="next-title"/>
            
            <!-- First Preview Box - Next brick (centered) -->
            <VBox fx:id="nextPreviewFrame"
                  alignment="CENTER"
                  styleClass="next-box">
                <GridPane fx:id="brickPanel" 
                          hgap="1" 
                          vgap="1"
                          alignment="CENTER"/>
            </VBox>
            
            <!-- NEXT 2 Label - Above the second frame (center-aligned) -->
            <Label fx:id="upNextLabel" 
                   text="NEXT 2" 
                   styleClass="next-title"/>
            
            <!-- Second Preview Box - Next 2 brick (centered) -->
            <VBox fx:id="nextPreviewFrame2"
                  alignment="CENTER"
                  styleClass="next-box">
                <GridPane fx:id="brickPanel2" 
                          hgap="1" 
                          vgap="1"
                          alignment="CENTER"/>
            </VBox>
            
            <!-- Notification group stays outside the frames -->
            <Group fx:id="groupNotification"/>
        </VBox>
    </HBox>

    <!-- Pause Overlay -->
    <VBox fx:id="pauseOverlay" 
          visible="false" 
          alignment="CENTER" 
          style="-fx-background-color: rgba(0, 0, 0, 0.75);">
        <Label fx:id="pauseLabel" 
               text="PRESS P TO RESUME" 
               style="-fx-font-size: 42; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Arial Black';"/>
    </VBox>

    <!-- Game Over Overlay -->
    <GameOverPanel fx:id="gameOverPanel" visible="false"/>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</StackPane>
